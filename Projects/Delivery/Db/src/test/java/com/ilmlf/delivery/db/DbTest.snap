com.ilmlf.delivery.db.DbTest.testStack=[
  {
    "Outputs": {
      "configJsonContents": {
        "Description": "Config file (in json format) for Stacks with Lambdas",
        "Value": {
          "Fn::Join": [
            "",
            [
              "{DB_PROXY_ARN=",
              {
                "Fn::GetAtt": [
                  "FarmerDbProxy7A9720C2",
                  "DBProxyArn"
                ]
              },
              ", DB_PROXY_ENDPOINT=",
              {
                "Fn::GetAtt": [
                  "FarmerDbProxy7A9720C2",
                  "Endpoint"
                ]
              },
              ":3306/FarmerDB, DB_REGION=",
              {
                "Ref": "AWS::Region"
              },
              ", DB_SECRET_ARN=",
              {
                "Ref": "FarmerDBSecretAttachment8D79E04A"
              },
              ", DB_SECRET_NAME=",
              {
                "Fn::Select": [
                  6,
                  {
                    "Fn::Split": [
                      ":",
                      {
                        "Ref": "testFarmerDBSecretCBD37E0A3fdaad7efa858a3daf9490cf0a702aeb"
                      }
                    ]
                  }
                ]
              },
              ", DB_SG_ID=",
              {
                "Fn::GetAtt": [
                  "FarmerDeliverySGDA50C27C",
                  "GroupId"
                ]
              },
              ", DB_VPC_ID=",
              {
                "Ref": "farmerVpc3E1EF418"
              },
              "}"
            ]
          ]
        }
      }
    },
    "Resources": {
      "FarmerDBC89642C8": {
        "DeletionPolicy": "Snapshot",
        "Properties": {
          "AllocatedStorage": "25",
          "AutoMinorVersionUpgrade": true,
          "BackupRetentionPeriod": 7,
          "CopyTagsToSnapshot": true,
          "DBInstanceClass": "db.t2.small",
          "DBInstanceIdentifier": "FarmerDB",
          "DBName": "FarmerDB",
          "DBSubnetGroupName": {
            "Ref": "FarmerDBSubnetGroup1B4DA139"
          },
          "DeletionProtection": false,
          "Engine": "mysql",
          "EngineVersion": "5.7.31",
          "MasterUserPassword": {
            "Fn::Join": [
              "",
              [
                "{{resolve:secretsmanager:",
                {
                  "Ref": "testFarmerDBSecretCBD37E0A3fdaad7efa858a3daf9490cf0a702aeb"
                },
                ":SecretString:password::}}"
              ]
            ]
          },
          "MasterUsername": "FarmerDBadmin",
          "MultiAZ": true,
          "Port": "3306",
          "PubliclyAccessible": false,
          "StorageEncrypted": true,
          "StorageType": "gp2",
          "VPCSecurityGroups": [
            {
              "Fn::GetAtt": [
                "FarmerDeliverySGDA50C27C",
                "GroupId"
              ]
            }
          ]
        },
        "Type": "AWS::RDS::DBInstance",
        "UpdateReplacePolicy": "Snapshot"
      },
      "FarmerDBSecretAttachment8D79E04A": {
        "Properties": {
          "SecretId": {
            "Ref": "testFarmerDBSecretCBD37E0A3fdaad7efa858a3daf9490cf0a702aeb"
          },
          "TargetId": {
            "Ref": "FarmerDBC89642C8"
          },
          "TargetType": "AWS::RDS::DBInstance"
        },
        "Type": "AWS::SecretsManager::SecretTargetAttachment"
      },
      "FarmerDBSubnetGroup1B4DA139": {
        "Properties": {
          "DBSubnetGroupDescription": "Subnet group for FarmerDB database",
          "SubnetIds": [
            {
              "Ref": "farmerVpcPublicSubnet1SubnetD688CBA4"
            },
            {
              "Ref": "farmerVpcPublicSubnet2Subnet9E651304"
            }
          ]
        },
        "Type": "AWS::RDS::DBSubnetGroup"
      },
      "FarmerDbProxy7A9720C2": {
        "Properties": {
          "Auth": [
            {
              "AuthScheme": "SECRETS",
              "IAMAuth": "DISABLED",
              "SecretArn": {
                "Ref": "FarmerDBSecretAttachment8D79E04A"
              }
            }
          ],
          "DBProxyName": "FarmerDbProxy",
          "EngineFamily": "MYSQL",
          "RequireTLS": true,
          "RoleArn": {
            "Fn::GetAtt": [
              "FarmerDbProxyIAMRoleF72268A5",
              "Arn"
            ]
          },
          "VpcSecurityGroupIds": [
            {
              "Fn::GetAtt": [
                "FarmerDeliverySGDA50C27C",
                "GroupId"
              ]
            }
          ],
          "VpcSubnetIds": [
            {
              "Ref": "farmerVpcPrivateSubnet1SubnetCCC9274B"
            },
            {
              "Ref": "farmerVpcPrivateSubnet2SubnetE7B0A714"
            }
          ]
        },
        "Type": "AWS::RDS::DBProxy"
      },
      "FarmerDbProxyIAMRoleDefaultPolicy212445D5": {
        "Properties": {
          "PolicyDocument": {
            "Statement": [
              {
                "Action": [
                  "secretsmanager:GetSecretValue",
                  "secretsmanager:DescribeSecret"
                ],
                "Effect": "Allow",
                "Resource": {
                  "Ref": "FarmerDBSecretAttachment8D79E04A"
                }
              }
            ],
            "Version": "2012-10-17"
          },
          "PolicyName": "FarmerDbProxyIAMRoleDefaultPolicy212445D5",
          "Roles": [
            {
              "Ref": "FarmerDbProxyIAMRoleF72268A5"
            }
          ]
        },
        "Type": "AWS::IAM::Policy"
      },
      "FarmerDbProxyIAMRoleF72268A5": {
        "Properties": {
          "AssumeRolePolicyDocument": {
            "Statement": [
              {
                "Action": "sts:AssumeRole",
                "Effect": "Allow",
                "Principal": {
                  "Service": "rds.amazonaws.com"
                }
              }
            ],
            "Version": "2012-10-17"
          }
        },
        "Type": "AWS::IAM::Role"
      },
      "FarmerDbProxyProxyTargetGroupEC553179": {
        "Properties": {
          "ConnectionPoolConfigurationInfo": {
            "ConnectionBorrowTimeout": 30,
            "MaxConnectionsPercent": 50
          },
          "DBInstanceIdentifiers": [
            {
              "Ref": "FarmerDBC89642C8"
            }
          ],
          "DBProxyName": {
            "Ref": "FarmerDbProxy7A9720C2"
          },
          "TargetGroupName": "default"
        },
        "Type": "AWS::RDS::DBProxyTargetGroup"
      },
      "FarmerDeliverySGDA50C27C": {
        "Properties": {
          "GroupDescription": "Shared SG for database and proxy",
          "SecurityGroupEgress": [
            {
              "CidrIp": "0.0.0.0/0",
              "Description": "Allow all outbound traffic by default",
              "IpProtocol": "-1"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::SecurityGroup"
      },
      "FarmerDeliverySGfromtestFarmerDeliverySG0E6AE860IndirectPort944272E1": {
        "Properties": {
          "Description": "Allow connections to the database Instance from the Proxy",
          "FromPort": {
            "Fn::GetAtt": [
              "FarmerDBC89642C8",
              "Endpoint.Port"
            ]
          },
          "GroupId": {
            "Fn::GetAtt": [
              "FarmerDeliverySGDA50C27C",
              "GroupId"
            ]
          },
          "IpProtocol": "tcp",
          "SourceSecurityGroupId": {
            "Fn::GetAtt": [
              "FarmerDeliverySGDA50C27C",
              "GroupId"
            ]
          },
          "ToPort": {
            "Fn::GetAtt": [
              "FarmerDBC89642C8",
              "Endpoint.Port"
            ]
          }
        },
        "Type": "AWS::EC2::SecurityGroupIngress"
      },
      "FarmerDeliverySGfromtestinboundDbAccessSecurityGroupFarmer80CA5D5033061FAB2892": {
        "Properties": {
          "Description": "from testinboundDbAccessSecurityGroupFarmer80CA5D50:3306",
          "FromPort": 3306,
          "GroupId": {
            "Fn::GetAtt": [
              "FarmerDeliverySGDA50C27C",
              "GroupId"
            ]
          },
          "IpProtocol": "tcp",
          "SourceSecurityGroupId": {
            "Fn::GetAtt": [
              "FarmerDeliverySGDA50C27C",
              "GroupId"
            ]
          },
          "ToPort": 3306
        },
        "Type": "AWS::EC2::SecurityGroupIngress"
      },
      "farmerVpc3E1EF418": {
        "Properties": {
          "CidrBlock": "10.0.0.0/16",
          "EnableDnsHostnames": true,
          "EnableDnsSupport": true,
          "InstanceTenancy": "default",
          "Tags": [
            {
              "Key": "Name",
              "Value": "test/farmer-Vpc"
            }
          ]
        },
        "Type": "AWS::EC2::VPC"
      },
      "farmerVpcIGW77EA3214": {
        "Properties": {
          "Tags": [
            {
              "Key": "Name",
              "Value": "test/farmer-Vpc"
            }
          ]
        },
        "Type": "AWS::EC2::InternetGateway"
      },
      "farmerVpcPrivateSubnet1DefaultRoute21094D32": {
        "Properties": {
          "DestinationCidrBlock": "0.0.0.0/0",
          "NatGatewayId": {
            "Ref": "farmerVpcPublicSubnet1NATGatewayAA1B3859"
          },
          "RouteTableId": {
            "Ref": "farmerVpcPrivateSubnet1RouteTableEA47B893"
          }
        },
        "Type": "AWS::EC2::Route"
      },
      "farmerVpcPrivateSubnet1RouteTableAssociationB94D34C5": {
        "Properties": {
          "RouteTableId": {
            "Ref": "farmerVpcPrivateSubnet1RouteTableEA47B893"
          },
          "SubnetId": {
            "Ref": "farmerVpcPrivateSubnet1SubnetCCC9274B"
          }
        },
        "Type": "AWS::EC2::SubnetRouteTableAssociation"
      },
      "farmerVpcPrivateSubnet1RouteTableEA47B893": {
        "Properties": {
          "Tags": [
            {
              "Key": "Name",
              "Value": "test/farmer-Vpc/PrivateSubnet1"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::RouteTable"
      },
      "farmerVpcPrivateSubnet1SubnetCCC9274B": {
        "Properties": {
          "AvailabilityZone": {
            "Fn::Select": [
              0,
              {
                "Fn::GetAZs": ""
              }
            ]
          },
          "CidrBlock": "10.0.128.0/18",
          "MapPublicIpOnLaunch": false,
          "Tags": [
            {
              "Key": "aws-cdk:subnet-name",
              "Value": "Private"
            },
            {
              "Key": "aws-cdk:subnet-type",
              "Value": "Private"
            },
            {
              "Key": "Name",
              "Value": "test/farmer-Vpc/PrivateSubnet1"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::Subnet"
      },
      "farmerVpcPrivateSubnet2DefaultRouteE813B3CB": {
        "Properties": {
          "DestinationCidrBlock": "0.0.0.0/0",
          "NatGatewayId": {
            "Ref": "farmerVpcPublicSubnet2NATGateway1A387200"
          },
          "RouteTableId": {
            "Ref": "farmerVpcPrivateSubnet2RouteTable859130FB"
          }
        },
        "Type": "AWS::EC2::Route"
      },
      "farmerVpcPrivateSubnet2RouteTable859130FB": {
        "Properties": {
          "Tags": [
            {
              "Key": "Name",
              "Value": "test/farmer-Vpc/PrivateSubnet2"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::RouteTable"
      },
      "farmerVpcPrivateSubnet2RouteTableAssociationB35F50E8": {
        "Properties": {
          "RouteTableId": {
            "Ref": "farmerVpcPrivateSubnet2RouteTable859130FB"
          },
          "SubnetId": {
            "Ref": "farmerVpcPrivateSubnet2SubnetE7B0A714"
          }
        },
        "Type": "AWS::EC2::SubnetRouteTableAssociation"
      },
      "farmerVpcPrivateSubnet2SubnetE7B0A714": {
        "Properties": {
          "AvailabilityZone": {
            "Fn::Select": [
              1,
              {
                "Fn::GetAZs": ""
              }
            ]
          },
          "CidrBlock": "10.0.192.0/18",
          "MapPublicIpOnLaunch": false,
          "Tags": [
            {
              "Key": "aws-cdk:subnet-name",
              "Value": "Private"
            },
            {
              "Key": "aws-cdk:subnet-type",
              "Value": "Private"
            },
            {
              "Key": "Name",
              "Value": "test/farmer-Vpc/PrivateSubnet2"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::Subnet"
      },
      "farmerVpcPublicSubnet1DefaultRouteD45A595C": {
        "DependsOn": [
          "farmerVpcVPCGW5B113563"
        ],
        "Properties": {
          "DestinationCidrBlock": "0.0.0.0/0",
          "GatewayId": {
            "Ref": "farmerVpcIGW77EA3214"
          },
          "RouteTableId": {
            "Ref": "farmerVpcPublicSubnet1RouteTable70D29438"
          }
        },
        "Type": "AWS::EC2::Route"
      },
      "farmerVpcPublicSubnet1EIPB227751A": {
        "Properties": {
          "Domain": "vpc",
          "Tags": [
            {
              "Key": "Name",
              "Value": "test/farmer-Vpc/PublicSubnet1"
            }
          ]
        },
        "Type": "AWS::EC2::EIP"
      },
      "farmerVpcPublicSubnet1NATGatewayAA1B3859": {
        "Properties": {
          "AllocationId": {
            "Fn::GetAtt": [
              "farmerVpcPublicSubnet1EIPB227751A",
              "AllocationId"
            ]
          },
          "SubnetId": {
            "Ref": "farmerVpcPublicSubnet1SubnetD688CBA4"
          },
          "Tags": [
            {
              "Key": "Name",
              "Value": "test/farmer-Vpc/PublicSubnet1"
            }
          ]
        },
        "Type": "AWS::EC2::NatGateway"
      },
      "farmerVpcPublicSubnet1RouteTable70D29438": {
        "Properties": {
          "Tags": [
            {
              "Key": "Name",
              "Value": "test/farmer-Vpc/PublicSubnet1"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::RouteTable"
      },
      "farmerVpcPublicSubnet1RouteTableAssociation8318E69F": {
        "Properties": {
          "RouteTableId": {
            "Ref": "farmerVpcPublicSubnet1RouteTable70D29438"
          },
          "SubnetId": {
            "Ref": "farmerVpcPublicSubnet1SubnetD688CBA4"
          }
        },
        "Type": "AWS::EC2::SubnetRouteTableAssociation"
      },
      "farmerVpcPublicSubnet1SubnetD688CBA4": {
        "Properties": {
          "AvailabilityZone": {
            "Fn::Select": [
              0,
              {
                "Fn::GetAZs": ""
              }
            ]
          },
          "CidrBlock": "10.0.0.0/18",
          "MapPublicIpOnLaunch": true,
          "Tags": [
            {
              "Key": "aws-cdk:subnet-name",
              "Value": "Public"
            },
            {
              "Key": "aws-cdk:subnet-type",
              "Value": "Public"
            },
            {
              "Key": "Name",
              "Value": "test/farmer-Vpc/PublicSubnet1"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::Subnet"
      },
      "farmerVpcPublicSubnet2DefaultRouteEE7A93B6": {
        "DependsOn": [
          "farmerVpcVPCGW5B113563"
        ],
        "Properties": {
          "DestinationCidrBlock": "0.0.0.0/0",
          "GatewayId": {
            "Ref": "farmerVpcIGW77EA3214"
          },
          "RouteTableId": {
            "Ref": "farmerVpcPublicSubnet2RouteTable3FCC446A"
          }
        },
        "Type": "AWS::EC2::Route"
      },
      "farmerVpcPublicSubnet2EIPFCBCD01A": {
        "Properties": {
          "Domain": "vpc",
          "Tags": [
            {
              "Key": "Name",
              "Value": "test/farmer-Vpc/PublicSubnet2"
            }
          ]
        },
        "Type": "AWS::EC2::EIP"
      },
      "farmerVpcPublicSubnet2NATGateway1A387200": {
        "Properties": {
          "AllocationId": {
            "Fn::GetAtt": [
              "farmerVpcPublicSubnet2EIPFCBCD01A",
              "AllocationId"
            ]
          },
          "SubnetId": {
            "Ref": "farmerVpcPublicSubnet2Subnet9E651304"
          },
          "Tags": [
            {
              "Key": "Name",
              "Value": "test/farmer-Vpc/PublicSubnet2"
            }
          ]
        },
        "Type": "AWS::EC2::NatGateway"
      },
      "farmerVpcPublicSubnet2RouteTable3FCC446A": {
        "Properties": {
          "Tags": [
            {
              "Key": "Name",
              "Value": "test/farmer-Vpc/PublicSubnet2"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::RouteTable"
      },
      "farmerVpcPublicSubnet2RouteTableAssociation0F0AFA60": {
        "Properties": {
          "RouteTableId": {
            "Ref": "farmerVpcPublicSubnet2RouteTable3FCC446A"
          },
          "SubnetId": {
            "Ref": "farmerVpcPublicSubnet2Subnet9E651304"
          }
        },
        "Type": "AWS::EC2::SubnetRouteTableAssociation"
      },
      "farmerVpcPublicSubnet2Subnet9E651304": {
        "Properties": {
          "AvailabilityZone": {
            "Fn::Select": [
              1,
              {
                "Fn::GetAZs": ""
              }
            ]
          },
          "CidrBlock": "10.0.64.0/18",
          "MapPublicIpOnLaunch": true,
          "Tags": [
            {
              "Key": "aws-cdk:subnet-name",
              "Value": "Public"
            },
            {
              "Key": "aws-cdk:subnet-type",
              "Value": "Public"
            },
            {
              "Key": "Name",
              "Value": "test/farmer-Vpc/PublicSubnet2"
            }
          ],
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::Subnet"
      },
      "farmerVpcVPCGW5B113563": {
        "Properties": {
          "InternetGatewayId": {
            "Ref": "farmerVpcIGW77EA3214"
          },
          "VpcId": {
            "Ref": "farmerVpc3E1EF418"
          }
        },
        "Type": "AWS::EC2::VPCGatewayAttachment"
      },
      "testFarmerDBSecretCBD37E0A3fdaad7efa858a3daf9490cf0a702aeb": {
        "Properties": {
          "Description": {
            "Fn::Join": [
              "",
              [
                "Generated by the CDK for stack: ",
                {
                  "Ref": "AWS::StackName"
                }
              ]
            ]
          },
          "GenerateSecretString": {
            "ExcludeCharacters": " %+~`#$&*()|[]{}:;<>?!'/@\"\\",
            "GenerateStringKey": "password",
            "PasswordLength": 30,
            "SecretStringTemplate": "{\"username\":\"FarmerDBadmin\"}"
          }
        },
        "Type": "AWS::SecretsManager::Secret"
      }
    }
  }
]